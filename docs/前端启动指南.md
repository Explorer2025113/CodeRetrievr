# 前端启动指南

## 快速开始

### 1. 安装依赖

```bash
cd frontend
npm install
```

如果使用 yarn：
```bash
yarn install
```

如果使用 pnpm：
```bash
pnpm install
```

### 2. 启动开发服务器

```bash
npm run dev
```

前端将在 http://localhost:3000 启动

### 3. 访问应用

打开浏览器访问：http://localhost:3000

## 前提条件

### 后端服务

确保后端API服务已启动：

```bash
# 在项目根目录
python -m uvicorn app.main:app --reload
```

后端默认运行在 http://localhost:8000

### 环境变量（可选）

创建 `frontend/.env` 文件（可选）：

```env
VITE_API_BASE_URL=http://localhost:8000
```

如果不设置，默认使用 `http://localhost:8000`

## 功能测试

### 1. 基础搜索

1. 在搜索框输入查询，例如："如何实现快速排序"
2. 点击"搜索"按钮
3. 查看搜索结果

### 2. 语言筛选

1. 选择编程语言（如：Python）
2. 输入查询并搜索
3. 结果将只显示指定语言的代码

### 3. 生成复用说明

1. 勾选"生成复用说明"
2. 设置说明数量（1-5条）
3. 搜索后查看AI生成的说明

### 4. 代码复制

1. 在搜索结果中找到代码片段
2. 点击"复制"按钮
3. 代码已复制到剪贴板

## 构建生产版本

### 构建

```bash
npm run build
```

构建产物在 `dist` 目录中

### 预览

```bash
npm run preview
```

## 故障排除

### 问题1：无法连接到后端API

**症状**：搜索时显示"搜索失败"错误

**解决方法**：
1. 检查后端服务是否启动
2. 检查后端端口是否为8000
3. 检查 `VITE_API_BASE_URL` 配置
4. 检查后端CORS配置

### 问题2：代码高亮不显示

**症状**：代码显示为纯文本，没有语法高亮

**解决方法**：
1. 检查 `react-syntax-highlighter` 是否正确安装
2. 检查浏览器控制台是否有错误
3. 检查语言名称是否正确

### 问题3：Markdown渲染异常

**症状**：复用说明显示为原始Markdown文本

**解决方法**：
1. 检查 `react-markdown` 和 `remark-gfm` 是否正确安装
2. 检查浏览器控制台是否有错误
3. 检查Markdown内容格式

### 问题4：端口被占用

**症状**：启动时显示端口3000已被占用

**解决方法**：
1. 关闭占用端口的进程
2. 或在 `vite.config.ts` 中修改端口号

### 问题5：依赖安装失败

**症状**：`npm install` 失败

**解决方法**：
1. 清除缓存：`npm cache clean --force`
2. 删除 `node_modules` 和 `package-lock.json`
3. 重新安装：`npm install`
4. 或尝试使用 yarn 或 pnpm

## 开发说明

### 项目结构

```
frontend/
├── src/
│   ├── components/       # 组件
│   │   ├── Header.tsx
│   │   ├── SearchResults.tsx
│   │   ├── CodeDisplay.tsx
│   │   └── ExplanationDisplay.tsx
│   ├── pages/           # 页面
│   │   └── SearchPage.tsx
│   ├── services/        # API服务
│   │   └── api.ts
│   ├── App.tsx          # 主应用
│   └── main.tsx         # 入口文件
├── public/              # 静态资源
├── package.json
├── tsconfig.json
└── vite.config.ts
```

### API代理配置

前端通过 `/api` 代理访问后端API，配置在 `vite.config.ts` 中：

```typescript
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:8000',
      changeOrigin: true,
      rewrite: (path) => path.replace(/^\/api/, ''),
    },
  },
}
```

### 组件说明

- **SearchPage**: 搜索页面，包含搜索表单和结果展示
- **SearchResults**: 搜索结果列表组件
- **CodeDisplay**: 代码展示组件，支持高亮和复制
- **ExplanationDisplay**: 复用说明展示组件，支持Markdown渲染

## 技术栈

- **React 18** - UI框架
- **TypeScript** - 类型安全
- **Vite** - 构建工具
- **Ant Design 5** - UI组件库
- **React Router** - 路由管理
- **Axios** - HTTP客户端
- **React Syntax Highlighter** - 代码高亮
- **React Markdown** - Markdown渲染

## 下一步

- [ ] 添加更多筛选选项
- [ ] 实现查询历史功能
- [ ] 添加代码收藏功能
- [ ] 优化移动端体验
- [ ] 添加暗色模式支持

## 相关文档

- [项目功能说明](./项目功能说明.md)
- [API文档](../README.md)
- [后端启动指南](./环境配置指南.md)

